(defmodule controllo-scena(import prevenzione-inquinamento ?ALL))
(import funzioni-globali ?ALL)
;;//////////////////////	CONTROLLO AMBIENTE PRELIMINARE	//////////////////
;;la priorità è assicurarsi che non ci siano feriti
(defrule cerca-feriti
	(prevenzione-inquinamento::finito no)
	(prevenzione-inquinamento::indumenti)
	(prevenzione-inquinamento::curiosi no)
	(not(feriti))
	(prevenzione-inquinamento::osservare si)
	=>
	(printout t "E' fonamentale assicurarsi che non ci siano feriti." crlf "Ce ne sono? [si/no]")
	(assert (feriti funzioni-globali::monitora-si-no(read))))
;;in presenza di feriti, è necessario coinvolgere gli operatori sanitari, così che mettano in sicurezza i feriti
(defrule soccorso-feriti
	(prevenzione-inquinamento::finito no)
	(prevenzione-inquinamento::indumenti)
	(prevenzione-inquinamento::curiosi no)
	(feriti si)
	=>
	(printout t "E' necessario chiamare gli addetti ai soccorsi" crlf "I feriti sono stati soccorsi? [si/no]")
	(if (eq funzioni-globali::monitora-si-no(read) si) then (assert (feriti no)) else (feriti si)))